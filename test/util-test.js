"use strict";

var chai = require('chai');
var utilFunctions = require('../utilFunctions');
var expect = chai.expect;

describe('parseJSON', function () {
    it('should return null if body is not JSON', function () {
        var result = utilFunctions.parseJSON("A string");
        expect(result).to.not.exist;
    });

    it('should return null if body is null', function () {
        var result = utilFunctions.parseJSON(null);
        expect(result).to.not.exist;
    });

    it('should return object if body is valid JSON', function () {
        var json = "[{\"title\":\"Gotham\",\"sortTitle\":\"gotham\",\"seasonCount\":3,\"status\":\"continuing\",\"overview\":\"The story behind Detective James Gordon's rise to prominence in Gotham City in the years before Batman's arrival.\",\"network\":\"FOX (US)\",\"airTime\":\"20:00\",\"images\":[{\"coverType\":\"fanart\",\"url\":\"http://thetvdb.com/banners/fanart/original/274431-11.jpg\"},{\"coverType\":\"banner\",\"url\":\"http://thetvdb.com/banners/graphical/274431-g3.jpg\"},{\"coverType\":\"poster\",\"url\":\"http://thetvdb.com/banners/posters/274431-26.jpg\"}],\"remotePoster\":\"http://thetvdb.com/banners/posters/274431-26.jpg\",\"seasons\":[{\"seasonNumber\":0,\"monitored\":false},{\"seasonNumber\":1,\"monitored\":false},{\"seasonNumber\":2,\"monitored\":false},{\"seasonNumber\":3,\"monitored\":false}],\"year\":2014,\"profileId\":0,\"seasonFolder\":false,\"monitored\":false,\"useSceneNumbering\":false,\"runtime\":45,\"tvdbId\":274431,\"tvRageId\":38049,\"tvMazeId\":11,\"firstAired\":\"2014-09-21T14:00:00Z\",\"seriesType\":\"standard\",\"cleanTitle\":\"gotham\",\"imdbId\":\"tt3749900\",\"titleSlug\":\"gotham\",\"certification\":\"TV-14\",\"genres\":[\"Action\",\"Crime\",\"Drama\",\"Suspense\"],\"tags\":[],\"added\":\"0001-01-01T00:00:00Z\",\"ratings\":{\"votes\":134,\"value\":8.4},\"qualityProfileId\":0},{\"title\":\"Gotham Girls\",\"sortTitle\":\"gotham girls\",\"seasonCount\":3,\"status\":\"ended\",\"overview\":\"Gotham Girls, an online Flash-animated series, debuted on July 27th, 2000, spotlighting Batgirl, Harley Quinn, Poison Ivy, Catwoman and other female Gothamites. If you've never checked out the Gotham Girls, but are an avid follower of the Batman animated shows, you'll immediately recognize some familiar voices. Reprising their roles are Tara Strong (Batgirl), Arleen Sorkin (Harley Quinn), Diane Pershing (Poison Ivy), and Adrienne Barbeau (Catwoman).\",\"network\":\"WEB\",\"images\":[{\"coverType\":\"fanart\",\"url\":\"http://thetvdb.com/banners/fanart/original/79390-1.jpg\"},{\"coverType\":\"banner\",\"url\":\"http://thetvdb.com/banners/graphical/79390-g2.jpg\"},{\"coverType\":\"poster\",\"url\":\"http://thetvdb.com/banners/posters/79390-2.jpg\"}],\"remotePoster\":\"http://thetvdb.com/banners/posters/79390-2.jpg\",\"seasons\":[{\"seasonNumber\":0,\"monitored\":false},{\"seasonNumber\":1,\"monitored\":false},{\"seasonNumber\":2,\"monitored\":false},{\"seasonNumber\":3,\"monitored\":false}],\"year\":2000,\"profileId\":0,\"seasonFolder\":false,\"monitored\":false,\"useSceneNumbering\":false,\"runtime\":5,\"tvdbId\":79390,\"tvRageId\":31712,\"tvMazeId\":7349,\"firstAired\":\"2000-07-26T14:00:00Z\",\"seriesType\":\"standard\",\"cleanTitle\":\"gothamgirls\",\"titleSlug\":\"gotham-girls\",\"genres\":[\"Animation\"],\"tags\":[],\"added\":\"0001-01-01T00:00:00Z\",\"ratings\":{\"votes\":1,\"value\":5.0},\"qualityProfileId\":0},{\"title\":\"Live at Gotham\",\"sortTitle\":\"live at gotham\",\"seasonCount\":4,\"status\":\"continuing\",\"overview\":\"Live at Gotham is a standup comedy television show airing on Comedy Central in the United States. The show features up and coming stand up comedians performing live at the Gotham Comedy Club in New York City. It premiered on July 21, 2006.\",\"network\":\"Comedy Central\",\"images\":[{\"coverType\":\"banner\",\"url\":\"http://thetvdb.com/banners/graphical/125171-g.jpg\"}],\"seasons\":[{\"seasonNumber\":1,\"monitored\":false},{\"seasonNumber\":2,\"monitored\":false},{\"seasonNumber\":3,\"monitored\":false},{\"seasonNumber\":4,\"monitored\":false}],\"year\":0,\"profileId\":0,\"seasonFolder\":false,\"monitored\":false,\"useSceneNumbering\":false,\"runtime\":1,\"tvdbId\":125171,\"tvRageId\":0,\"tvMazeId\":13862,\"seriesType\":\"standard\",\"cleanTitle\":\"liveatgotham\",\"imdbId\":\"tt0805892\",\"titleSlug\":\"live-at-gotham\",\"genres\":[],\"tags\":[],\"added\":\"0001-01-01T00:00:00Z\",\"ratings\":{\"votes\":0,\"value\":0.0},\"qualityProfileId\":0},{\"title\":\"Gotham Comedy Live\",\"sortTitle\":\"gotham comedy live\",\"seasonCount\":6,\"status\":\"continuing\",\"overview\":\"Building on our promise to bring you more LIVE programming than anyone else, AXS TV dives deep into the world of comedy with Gotham Comedy LIVE. Another round of great LIVE standup comes your way starting May 16! Tune in each Thursday as some of the funniest comics in America perform LIVE from the Legendary Gotham Comedy Club in New York.\",\"network\":\"AXS TV\",\"airTime\":\"22:00\",\"images\":[{\"coverType\":\"poster\",\"url\":\"http://thetvdb.com/banners/posters/279009-1.jpg\"}],\"remotePoster\":\"http://thetvdb.com/banners/posters/279009-1.jpg\",\"seasons\":[{\"seasonNumber\":1,\"monitored\":false},{\"seasonNumber\":2,\"monitored\":false},{\"seasonNumber\":3,\"monitored\":false},{\"seasonNumber\":4,\"monitored\":false},{\"seasonNumber\":5,\"monitored\":false},{\"seasonNumber\":6,\"monitored\":false}],\"year\":2012,\"profileId\":0,\"seasonFolder\":false,\"monitored\":false,\"useSceneNumbering\":false,\"runtime\":60,\"tvdbId\":279009,\"tvRageId\":38154,\"tvMazeId\":5374,\"firstAired\":\"2012-11-14T13:00:00Z\",\"seriesType\":\"standard\",\"cleanTitle\":\"gothamcomedylive\",\"imdbId\":\"tt2559456\",\"titleSlug\":\"gotham-comedy-live\",\"certification\":\"TV-14\",\"genres\":[\"Comedy\"],\"tags\":[],\"added\":\"0001-01-01T00:00:00Z\",\"ratings\":{\"votes\":0,\"value\":0.0},\"qualityProfileId\":0},{\"title\":\"The New Batman Adventures\",\"sortTitle\":\"new batman adventures\",\"seasonCount\":2,\"status\":\"ended\",\"overview\":\"Also known as Batman Gotham Knights, this series takes place two years after the last episode of Batman: The Animated Series. Batman has continued to fight crime in Gotham City, but there have been some changes. Dick Grayson has become Nightwing; Tim Drake has taken over the role of Robin; and Batgirl has become apart of Batman's team. But the Dark Knight's greatest villains continue to plague Gotham City, so not everything has changed. This series aired alongside Superman as part of The New Batman/Superman Adventures on the WB. \\nFirst Telecast: September 13, 1997\\nLast Telecast: January 16, 1999 Episodes: 24 Color episodes (24 half-hour episodes, 2 Direct-to Video Movies)\",\"network\":\"The WB\",\"images\":[{\"coverType\":\"fanart\",\"url\":\"http://thetvdb.com/banners/fanart/original/77084-10.jpg\"},{\"coverType\":\"banner\",\"url\":\"http://thetvdb.com/banners/graphical/77084-g2.jpg\"},{\"coverType\":\"poster\",\"url\":\"http://thetvdb.com/banners/posters/77084-4.jpg\"}],\"remotePoster\":\"http://thetvdb.com/banners/posters/77084-4.jpg\",\"seasons\":[{\"seasonNumber\":0,\"monitored\":false},{\"seasonNumber\":1,\"monitored\":false},{\"seasonNumber\":2,\"monitored\":false}],\"year\":1997,\"profileId\":0,\"seasonFolder\":false,\"monitored\":false,\"useSceneNumbering\":false,\"runtime\":20,\"tvdbId\":77084,\"tvRageId\":2720,\"tvMazeId\":5951,\"firstAired\":\"1997-08-31T14:00:00Z\",\"seriesType\":\"standard\",\"cleanTitle\":\"thenewbatmanadventures\",\"imdbId\":\"tt0118266\",\"titleSlug\":\"the-new-batman-adventures\",\"genres\":[\"Action\",\"Adventure\",\"Animation\",\"Children\"],\"tags\":[],\"added\":\"0001-01-01T00:00:00Z\",\"ratings\":{\"votes\":14,\"value\":9.0},\"qualityProfileId\":0}]";
        var result = utilFunctions.parseJSON(json);
        expect(result).to.exist;
        expect(result).to.be.an('array');
    });
});